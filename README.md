# 天马G游戏筛选器 v1.0.1

一个用于管理和筛选天马G（Pegasus Frontend）游戏ROM的桌面应用程序。

[中文版] | [English](readme_en.md)

## 功能特性

- ✨ **项目管理**: 创建、打开和编辑项目，支持修改名称与目录
- ✨ **双视图模式**: 在来源目录和项目目录之间一键切换 (Tab键)
- ✨ **任务队列系统**: 先规划操作（添加/删除/更新），统一执行 (F5键)，支持实时日志
- ✨ **媒体预览**: 列表显示 Logo 图标，右侧实时展示封面图片与预览视频
- ✨ **元数据编辑**: 完整的游戏信息编辑、提取、合并与解析功能
- ✨ **批量操作**: 支持根据游戏名称列表批量搜索并添加到任务队列
- ✨ **交互体验**: 支持空格键多选、搜索框实时过滤、全局快捷键支持
- ✨ **日志系统**: 彩色日志输出，详细记录每一个任务的执行状态

## 快速开始

### 方案 A：直接使用 (推荐)

如果你是普通用户，建议直接从 GitHub 的 [Releases](https://github.com/mrwangyu2/pegasus-game-filter/releases) 页面下载最新的 `.zip` 压缩包。解压后运行其中的 `天马G游戏筛选器.exe` 即可，无需安装 Python。

### 方案 B：源码运行 (开发者)

```bash
# 1. 克隆项目
git clone https://github.com/mrwangyu2/pegasus-game-filter.git
cd pegasus-game-filter

# 2. 安装依赖
pip install -r requirements.txt

# 3. 安装视频解码器 (必需)
# 为了支持程序内的视频预览播放，请务必安装 LAVFilters：
# 下载地址：https://github.com/Nevcairiel/LAVFilters/releases

# 4. 运行程序
python main.py
```

## 第一次使用

1. **创建项目**
   - 点击"文件" -> "新建项目"
   - 输入项目名称
   - 选择来源ROM根目录（包含平台子目录的Roms文件夹）
   - 选择项目ROM根目录（用于存放筛选后的游戏）
   - 保存项目文件

2. **浏览与运行游戏**
   - 在左侧列表中浏览所有游戏。
   - 点击游戏可查看右侧的封面图和预览视频。
   - **运行游戏**：双击列表中的游戏条目，程序将尝试调用系统关联的模拟器或程序打开该 ROM 文件。

3. **选择游戏**
   - 使用空格键选择游戏（再次按空格取消选择）
   - 选中的游戏会以黄色背景显示
   - 可以选择多个游戏

4. **执行任务**
   - 选择游戏后点击"添加到任务"（或按A键）
   - 任务会被加入队列，状态栏显示任务数量
   - 点击"执行任务"（或按F5键）统一执行
   - 查看日志窗口了解执行情况

## 使用指南

### 天马G目录结构

程序遵循天马G的目录结构规则：

```
Roms/                           # ROM根目录
├── GBA/                        # 平台目录
│   ├── metadata.pegasus.txt   # 元数据文件（必需）
│   ├── media/                 # 媒体目录
│   │   ├── 黄金太阳1/         # 游戏名称目录
│   │   │   ├── logo.png       # Logo图片
│   │   │   ├── boxFront.png   # 封面图片
│   │   │   └── video.mp4      # 视频预览
│   │   └── ...
│   ├── 游戏1.gba
│   ├── 游戏2.zip
│   └── ...
├── GB/                         # 其他平台
└── ...
```

### 快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| **Tab** | 切换视图 | 在来源目录和项目目录间切换 |
| **Space** | 选择/取消 | 切换当前游戏的选择状态 |
| **↑/↓** | 浏览游戏 | 上一个/下一个游戏 |
| **A** | 添加到任务 | 将选中的游戏加入任务队列 |
| **D** | 删除任务 | 将选中的游戏加入删除队列 |
| **F5** | 执行任务 | 统一执行任务队列中的所有任务 |
| **Ctrl+N** | 新建项目 | 创建新项目 |
| **Ctrl+O** | 打开项目 | 打开已有项目 |
| **Ctrl+S** | 保存项目 | 保存当前项目 |

## 开发者信息

- **版本**: 1.0.1
- **开发者**: 王宇
- **技术栈**: Python 3, PyQt5
- **项目文档**:
  - [快速部署与打包](doc/deployment.md)
  - [架构与设计方案](doc/implementation.md)
  - [代码结构说明](doc/structure.md)

## 许可证

本项目仅供学习和个人使用。

## 致谢

感谢Pegasus Frontend项目为我们提供了优秀的游戏前端解决方案。
